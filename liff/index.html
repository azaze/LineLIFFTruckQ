<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover">
  <title>My LIFF app 1.4</title>
  <link rel="stylesheet" href="css/style.css" media="all">
  
 
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>
  <!-- <p id="os"><b>OS:</b> </p>
  <p id="language"><b>Language:</b> </p>
  <p id="version"><b>Version:</b> </p>
  <p id="isInClient"><b>isInClient:</b> </p>
  <p id="accessToken"><b>AccessToken:</b> </p>
  <img id="pictureUrl">
  <p id="userId"><b>userId:</b> </p>
  <p id="displayName"><b>displayName:</b> </p>
  <p id="statusMessage"><b>statusMessage:</b> </p>
  <p id="decodedIDToken"><b>email:</b> </p>
  <p id="type"><b>type:</b> </p>
  <p id="viewType"><b>viewType:</b> </p>
  <p id="utouId"><b>utouId:</b> </p>
  <p id="roomId"><b>roomId:</b> </p>
  <p id="groupId"><b>groupId:</b> </p>
  <p id="friendship"><b>isFriendship:</b> </p>
  <p id="scanCode"><b>Code:</b> </p>
  <p id="isLoggedIn"><b>isLoggedIn:</b> </p>
  <p id="universalLink1"><b>Universal Link:</b> </p>
  <p id="universalLink2"><b>Universal Link with Query params:</b> </p>
  <p><a href="liff/path/?param=9">Link to Path</a></p> -->
  <style>
    #pictureUrl { display: block; margin: 0 auto }
    li { /* styles all li elements*/
    list-style-type: none;
    }
  </style>

<div id="step1" class="container">
   <div class="row">
    <div class="col-sm-12"><img id="pictureUrl" width="35%"></div>
  </div> 
  <div class="row">
    <div class="col-sm-12"><p id="userId"></p></div>
  </div> 
  <div class="row">
    <div class="col-sm-12"><p id="displayName"></p></div>
  </div> 
  <h2 class="form-control" style="background-color: blueviolet;color: #fff;">ข้อมูลการของคิว</h1>
  <div class="row">
    <div class="col-sm-12">
      <label>กิจกรรม</label>
      <select id="ddlToPic" class="form-control">
      <option selected="" value="--">--</option>
      <option value="รับตู้(หนัก)">รับตู้(หนัก)</option>
      <option value="ส่งตู้(หนัก)">ส่งตู้(หนัก)</option>
      <option value="รับตู้(เปล่า)">รับตู้(เปล่า)</option>
      <option value="ส่งตู้(เปล่า)">ส่งตู้(เปล่า)</option>
    </select>
    </div>
  </div> 
  <div class="row">
    <div class="col-sm-12">
      <label>ท่าเรือ</label>
      <select id="ddlTerminal" class="form-control">
        <option selected="" value="--">--</option>
        <option value="A0">A0</option>
        <option value="B1">B1</option>
    </select>
    </div>
  </div> 
  <div class="row">
    <div class="col-sm-12">
      <label>ทะเบียนรถ</label>
      <input type="text" id="txtLicense" class="form-control"/>
    </div>
  </div> 
  <div class="row">
    <div class="col-sm-12">
      <label>วันที่จอง</label>
      <input type="text" id="txtDate" class="form-control"/>
    </div>
  </div> 
  <div class="row">
    <div class="col-sm-12">
      <label>เบอร์ติดต่อ</label>
      <input type="text" id="txtTelNo" class="form-control"/>
    </div>
  </div> 
  <div class="row">
    <div class="col-sm-12">
      <br/>
      <button id="btnMsg" onclick="step1()" class="form-control">ถัดไป</button>
    </div>
  </div> 
</div>
<div id="step2" class="container">
  <div class="row">
      <div class="col-12">
        <div id="checkboxes">
           
        </div>
        
      </div>
  </div> 
 <div class="row">
    <div class="col-6">
      
      <button id="btnMsg" onclick="step2()" class="form-control">ถัดไป</button>
    </div>
    <div class="col-6">
      
      <button id="btnMsg" onclick="backStep1()" class="form-control">กลับ</button>
    </div>
  </div> 
 </div> 
 <br/>

</div>
<div id="step3" class="container">
  <h2 class="form-control" style="background-color: blueviolet;color: #fff;">สรุปการจองคิว</h2>
  
  <div class="row">
      <div class="col-sm-12">
        <label>กิจกรรม</label>
        <p type="text" id="lblTopic" class="form-control"></p>
      </div>    
 </div> 
 <div class="row">
  <div class="col-sm-12">
    <label>ท่าเรือ</label>
    <p type="text" id="lblTerminal" class="form-control"></p>
  </div>    
</div> 
<div class="row">
  <div class="col-sm-12">
    <label>ทะเบียนรถ</label>
    <p type="text" id="lblLicense" class="form-control"></p>
  </div>    
</div> 
<div class="row">
  <div class="col-sm-12">
    <label>วันที่</label>
    <p type="text" id="lblDate" class="form-control"></p>
  </div>    
</div> 
<div class="row">
  <div class="col-sm-12">
    <label>เวลา</label>
    <p type="text" id="lblTime" class="form-control"></p>
  </div>    
</div> 
<div class="row">
  <div class="col-sm-12">
    <label>เบอร์ติดต่อ</label>
    <p type="text" id="lblTel" class="form-control"></p>
  </div>    
</div> 
<br/>
<div class="row">
  <div class="col-6">
    
    <button id="btnMsg" onclick="step3()" class="form-control">ยืนยัน</button>
  </div>
  <div class="col-6">
    
    <button id="btnMsg" onclick="backStep2()" class="form-control">กลับไป</button>
  </div>
</div> 
</div>
  
 
  <!-- <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>  -->
  <script src="https://static.line-scdn.net/liff/edge/versions/2.9.0/sdk.js"></script>
  <script>
        var ddlToPic='';
        var ddlTerminal='';
        var txtLicense='';
        var txtDate='';
        var txtTelNo='';
    function step1() {
         
        var ddlToPic=$("#ddlToPic").val();
        var ddlTerminal=$("#ddlTerminal").val();
        var txtLicense=$("#txtLicense").val();
        var txtDate=$("#txtDate").val();
        var txtTelNo=$("#txtTelNo").val();
        console.log(ddlToPic+","+ddlTerminal+","+txtLicense+","+txtDate+","+txtTelNo);
        $("#step1").hide();
        $("#step2").show();
        loadData();
    }
    async function  loadData (){
      $select = $('#checkboxes');
        $.ajax({
            type: "GET",
            url: 'https://dummyjson.com/products',
            dataType: 'JSON',
            success:function(data) {
              JSON.stringify(data);
                $select.html('<h2 class="form-control" style="background-color: blueviolet;color: #fff;">ระบุ</h2>');
                $.each(data.products, function(key, val) {
                    $select.append('<li><input type="radio" name="BookList" value='+val.id+'> <label> ' + val.title + '</label> </li>');
                });
                $select.append('</li>');
            },
            error: function(){
                    $select.html('Please try again');
            }
        });
    }
    function backStep1(){
      $("#step2").hide();
      $("#step1").show();
      //loadData();

    }
    function backStep2(){
      $("#step3").hide();
      $("#step2").show();
       

    }
    function step2() {
     
      $("#step2").hide();
      $("#step3").show();
      
      var ddlToPic=$("#ddlToPic").val();
        var ddlTerminal=$("#ddlTerminal").val();
        var txtLicense=$("#txtLicense").val();
        var txtDate=$("#txtDate").val();
        var txtTelNo=$("#txtTelNo").val();
      console.log('result'+ddlToPic+","+ddlTerminal+","+txtLicense+","+txtDate+","+txtTelNo);
      
        document.getElementById("lblTopic").innerHTML = ddlToPic;
        document.getElementById("lblTerminal").innerHTML =ddlTerminal;
        document.getElementById("lblLicense").innerHTML = txtLicense;
        document.getElementById("lblDate").innerHTML = txtDate;
        document.getElementById("lblTime").innerHTML = txtDate;
        document.getElementById("lblTel").innerHTML = txtTelNo;

    }
    function step3() {
      var ddlToPic=$("#ddlToPic").val();
        var ddlTerminal=$("#ddlTerminal").val();
        var txtLicense=$("#txtLicense").val();
        var txtDate=$("#txtDate").val();
        var txtTelNo=$("#txtTelNo").val();
     
     
     alert('result'+ddlToPic+","+ddlTerminal+","+txtLicense+","+txtDate+","+txtTelNo);
 

   }
    function createUniversalLink() {
    }

    async function shareMsg() {
    }

    function logOut() {
    }

    function closed() {
    }

    async function scanCode() {
    }

    function openWindow() {
    }

    async function getFriendship() {
    }

    async function sendMsg() {
    }

    function getContext() {
    }

    async function getUserProfile() {
      liff.getProfile().then(profile => {
        document.getElementById("pictureUrl").src = profile.pictureUrl;
        document.getElementById("userId").innerHTML = '<b>UserId:</b> ' + profile.userId;
        document.getElementById("displayName").innerHTML = '<b>DisplayName:</b> ' + profile.displayName;
        document.getElementById("statusMessage").innerHTML = '<b>StatusMessage:</b> ' + profile.statusMessage;
        document.getElementById("getDecodedIDToken").innerHTML = '<b>Email:</b> ' + liff.getDecodedIDToken().email;
      }).catch(err => console.error(err));
      console.log(JSON.stringify(profile));
    }

    function getEnvironment() {
    }

    async function main() {
     
      await liff.init({ liffId: "2000487303-op9O67xV" })
      // getEnvironment()
      getUserProfile()
      // getContext()
      // getFriendship()
      // createUniversalLink()
    }
    //main()
    function runApp() {
      liff.getProfile().then(profile => {
        document.getElementById("pictureUrl").src = profile.pictureUrl;
        document.getElementById("userId").innerHTML = '<b>UserId:</b> ' + profile.userId;
        document.getElementById("displayName").innerHTML = '<b>DisplayName:</b> ' + profile.displayName;
        document.getElementById("statusMessage").innerHTML = '<b>StatusMessage:</b> ' + profile.statusMessage;
        document.getElementById("getDecodedIDToken").innerHTML = '<b>Email:</b> ' + liff.getDecodedIDToken().email;
      }).catch(err => console.error(err));
    }
    $("#step2").hide();
    $("#step3").hide();
    // liff.init({ liffId: "2000487303-op9O67xV" }, () => {
    //   if (liff.isLoggedIn()) {
    //     runApp()
    //   } else {
    //     liff.login();
    //   }
    // }, err => console.error(err.code, error.message));
  </script>
</body>
</html>
